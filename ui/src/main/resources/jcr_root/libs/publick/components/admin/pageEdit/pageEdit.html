<div data-ng-controller="newPageController" data-sly-use.page="com.nateyolles.sling.publick.components.admin.PageEdit" data-sly-unwrap></div>
<div data-sly-use.pageconf="com.nateyolles.sling.publick.components.admin.PageConfigurationEdit" data-sly-unwrap></div>

<form id="pageeditform" action="/bin/admin/editpage" method="post" enctype="multipart/form-data">
    <div class="row">
        <div class="col-lg-6 col-md-6">
            <div class="form-group">
                <label>Name</label>
                <input type="text" name="url" data-sly-attribute.value="${page.url}" class="form-control">
                <input type="hidden" name="parentpath" data-sly-attribute.value="${page.parentPath}" class="form-control">
                <input type="hidden" name="parentnode" data-sly-attribute.value="${page.parentNode}" class="form-control">
                <input type="hidden" name="mode" data-sly-attribute.value="${page.mode}" class="form-control">
                <span class="help-block">The node name. Used in the post's URL.</span>
            </div>
        </div>
    </div>
    <div id="primarytype" class="row">
        <div class="col-lg-6 col-md-6">
            <div class="form-group">
                <label>Primary Type</label><br>
                <select name="primarytype">
                    <option data-sly-attribute.selected="${page.primaryType == 'publick:page'}" value="publick:page">Page</option>
                    <option data-sly-attribute.selected="${page.primaryType == 'sling:Folder'}" value="sling:Folder">Folder</option>
                </select>
            </div>
        </div>
    </div>
    <div id="configurationName" class="row">
        <div class="col-lg-6 col-md-6">
            <div class="form-group">
                <label>Configuration</label><br>
                <select name="configurationName" data-sly-list="${pageconf.configurationNames}">
                    <option data-sly-attribute.selected="${page.configurationName == item}" value="${item}">${item}</option>
                </select>
            </div>
        </div>
    </div>
    <div id="visible" class="row">
        <div class="col-lg-6 col-md-6">
            <div class="form-group">
                <label>Publish</label><br>
                <input type="checkbox" name="visible" value="true" data-sly-attribute.checked="${page.visible}"> Show page
            </div>
        </div>
    </div>
    <div id="keywords" class="row">
        <div class="col-lg-4 col-md-4">
            <div class="form-group" data-ng-controller="KeywordsController" data-ng-init="keywords = ${page.getKeywordsJSON}">
                <label>Keywords</label>
                <div data-ng-repeat="keyword in keywords track by $index" class="input-group">
                    <input type="text" name="keywords" class="form-control" data-ng-model="keywords[$index]">
                    <div class="input-group-addon">
                        <a href="#" data-ng-click="removeKeyword($event, $index)"><i class="fa fa-minus-circle"></i></a>
                    </div>
                </div>
                <div class="input-group keywords-add-container">
                    <a href="#" data-ng-click="addKeyword($event)">Add keyword<i class="fa fa-plus-circle"></i></a>
                </div>
                <span class="help-block clear">Used for tag clouds, meta tags, and searching.</span>
            </div>
        </div>
    </div>
    <div id="links" class="row">
        <div class="col-lg-4 col-md-4">
            <div class="form-group" data-ng-controller="LinksController" data-ng-init="links = ${pageConf.getLinksJSON}">
                <label>Links</label>
                <div data-ng-repeat="link in links track by $index" class="input-group">
                    <input type="text" name="links" class="form-control" data-ng-model="links[$index]">
                    <div class="input-group-addon">
                        <a href="#" data-ng-click="removeLink($event, $index)"><i class="fa fa-minus-circle"></i></a>
                    </div>
                </div>
                <div class="input-group keywords-add-container">
                    <a href="#" data-ng-click="addLink($event)">Add link<i class="fa fa-plus-circle"></i></a>
                </div>
                <span class="help-block clear">Used for including CSS.</span>
            </div>
        </div>
    </div>
    <div id="scripts" class="row">
        <div class="col-lg-4 col-md-4">
            <div class="form-group" data-ng-controller="ScriptsController" data-ng-init="scripts = ${pageConf.getScriptsJSON}">
                <label>Scripts</label>
                <div data-ng-repeat="script in scripts track by $index" class="input-group">
                    <input type="text" name="scripts" class="form-control" data-ng-model="scripts[$index]">
                    <div class="input-group-addon">
                        <a href="#" data-ng-click="removeScript($event, $index)"><i class="fa fa-minus-circle"></i></a>
                    </div>
                </div>
                <div class="input-group keywords-add-container">
                    <a href="#" data-ng-click="addScript($event)">Add script<i class="fa fa-plus-circle"></i></a>
                </div>
                <span class="help-block clear">Used for including JS.</span>
            </div>
        </div>
    </div>
    <div id="description" class="row">
        <div class="col-lg-12 col-md-12">
            <div class="form-group">
                <label>Description</label>
                <input type="text" name="description" data-sly-attribute.value="${page.description}" class="form-control">
                <span class="help-block">Used as the description of the page for SEO in meta tags and when shared on Twitter, LinkedIn or Facebook.</span>
            </div>
        </div>
    </div>
    <div class="row">
        <div id="contentfield" class="col-lg-12 col-md-12">
            <div class="form-group">
                <label>Content</label>
                <textarea class="blog-edit-content form-control" id="content" name="content">${page.content @ context='unsafe'}</textarea>
            </div>
            <button type="submit" class="btn btn-primary"
                    data-sly-attribute.disabled="${!page.authorable && 'disabled'}">Save</button>
        </div>
    </div>
</form>